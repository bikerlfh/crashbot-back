# Generated by Django 4.2.5 on 2023-10-28 07:53

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('core', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='Bot',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='created at')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='updated at')),
                ('name', models.CharField(max_length=50, unique=True)),
                ('bot_type', models.CharField(default='loose', max_length=15)),
                ('is_active', models.BooleanField(default=True)),
                ('risk_factor', models.FloatField(default=0.1)),
                ('min_multiplier_to_bet', models.FloatField(default=1.5, help_text='Minimum multiplier to bet')),
                ('min_multiplier_to_recover_losses', models.FloatField(default=2.0, help_text='Minimum multiplier to recover losses')),
                ('min_probability_to_bet', models.FloatField(default=0.65, help_text='Minimum probability to bet')),
                ('min_category_percentage_to_bet', models.FloatField(default=0, help_text='Minimum percentage of correct predictions by category')),
                ('max_recovery_percentage_on_max_bet', models.FloatField(default=0.5, help_text='Maximum recovery percentage on maximum bet of home bet')),
                ('min_average_model_prediction', models.FloatField(default=0, help_text='Minimum average prediction model in live to bet')),
                ('stop_loss_percentage', models.FloatField(default=0, help_text='Stop loss percentage')),
                ('take_profit_percentage', models.FloatField(default=0, help_text='Take profit percentage')),
            ],
            options={
                'db_table': 'bot',
            },
        ),
        migrations.CreateModel(
            name='ModelHomeBet',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='created at')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='updated at')),
                ('name', models.CharField(max_length=50, unique=True)),
                ('model_type', models.CharField(choices=[('sequential', 'SEQUENTIAL'), ('sequential_lstm', 'SEQUENTIAL_LSTM'), ('gru', 'GRU'), ('decision_tree_regressor', 'DECISION_TREE_REGRESSOR'), ('linear_regression', 'LINEAR_REGRESSOR')], max_length=25)),
                ('status', models.CharField(choices=[('active', 'ACTIVE'), ('inactive', 'INACTIVE')], default='active', max_length=10)),
                ('seq_len', models.SmallIntegerField(default=10)),
                ('average_predictions', models.FloatField(default=0)),
                ('average_bets', models.FloatField(default=0)),
                ('result_date', models.DateTimeField(blank=True, default=None, null=True)),
                ('others', models.JSONField(blank=True, null=True)),
                ('crash_game', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='models', to='core.crashgame')),
                ('home_bet', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='models', to='core.homebet')),
            ],
            options={
                'db_table': 'model_homebet',
                'unique_together': {('home_bet', 'model_type')},
            },
        ),
        migrations.CreateModel(
            name='ModelCategoryResult',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='created at')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='updated at')),
                ('category', models.SmallIntegerField(choices=[(1, 'CATEGORY_1'), (2, 'CATEGORY_2'), (3, 'CATEGORY_3')])),
                ('correct_predictions', models.IntegerField(default=0)),
                ('incorrect_predictions', models.IntegerField(default=0)),
                ('percentage_predictions', models.FloatField()),
                ('correct_bets', models.IntegerField(default=0)),
                ('incorrect_bets', models.IntegerField(default=0)),
                ('percentage_bets', models.FloatField()),
                ('other_info', models.JSONField(blank=True, null=True)),
                ('model_home_bet', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='category_results', to='predictions.modelhomebet')),
            ],
            options={
                'db_table': 'model_category_result',
            },
        ),
        migrations.CreateModel(
            name='BotCondition',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='created at')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='updated at')),
                ('condition_on', models.CharField(choices=[('every_win', 'EVERY_WIN'), ('every_loss', 'EVERY_LOSS'), ('streak_wins', 'STREAK_WINS'), ('streak_losses', 'STREAK_LOSSES'), ('streak_n_multiplier_less_than', 'STREAK_N_MULTIPLIER_LESS_THAN'), ('streak_multiplier_greater_than', 'STREAK_N_MULTIPLIER_GREATER_THAN'), ('profit_greater_than', 'PROFIT_GREATER_THAN'), ('profit_less_than', 'PROFIT_LESS_THAN')], default='every_win', max_length=30)),
                ('condition_on_value', models.FloatField(default=0)),
                ('condition_on_value_2', models.FloatField(blank=True, default=None, null=True)),
                ('actions', models.JSONField(default=dict)),
                ('others', models.JSONField(blank=True, null=True)),
                ('bot', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='conditions', to='predictions.bot')),
            ],
            options={
                'db_table': 'bot_condition',
                'unique_together': {('bot', 'condition_on', 'condition_on_value', 'condition_on_value_2')},
            },
        ),
    ]
